# 资源文件管理指南

## 概述

扩展的 `run_linux.sh` 脚本现在包含了完整的资源文件管理功能，支持添加、移除和状态检查。

## 可用的资源文件包

1. **`Resource_Pack_for_PCGL_and_Android.zip`** - 基础资源包
   - 包含游戏运行所需的基础资源
   - 字体、图像、音频、动画等核心文件
   - Linux版本(PCGL)必需

2. **`Content_ExtraFont_and_CHN.zip`** - 汉化资源包
   - 包含中文字体和汉化文本
   - 需要先安装基础资源包
   - 可选，用于中文本地化

3. **`Resource_Pack_for_PCDX.zip`** - Windows DirectX版本资源包
   - Windows版本专用，Linux不需要

## Git 忽略策略

所有 `.zip` 资源文件已添加到 `.gitignore`：
```gitignore
# Resource files - these are large binary files that should not be committed
*.zip
Resource_Pack_*.zip
Content_*.zip
```

这样做的原因：
- 资源文件通常很大（几十MB到几百MB）
- 避免仓库膨胀
- 资源文件可以从其他渠道分发

## 脚本功能说明

### 主菜单
1. **构建整个项目** - 编译项目并智能检查资源
2. **运行主游戏（Debug/Release）** - 启动游戏，自动检查资源
3. **运行Python交互客户端** - 启动Avalonia版本的调试客户端
4. **清理构建输出** - 清理编译文件（但保留资源）
5. **资源文件管理** - 进入资源管理子菜单
6. **退出**

### 资源文件管理子菜单
1. **添加基础资源文件** - 安装PCGL版本的基础资源
2. **添加汉化资源文件** - 安装中文字体和汉化（自动检查基础资源）
3. **移除所有资源文件** - 清理所有已安装的资源
4. **查看资源文件状态** - 显示当前资源包和安装状态
5. **返回主菜单**

## 智能资源管理

脚本包含智能检查功能：
- **自动检测**：运行游戏时自动检查是否缺少资源
- **自动安装**：如果检测到资源包存在但未安装，会自动安装
- **依赖检查**：安装汉化资源时会先检查基础资源
- **状态显示**：清晰显示哪些资源包可用、哪些已安装

## 使用示例

### 初次设置
```bash
./run_linux.sh
# 选择 6 进入资源管理
# 选择 1 添加基础资源
# 选择 2 添加汉化资源（可选）
# 选择 5 返回主菜单
# 选择 2 运行游戏
```

### 日常使用
```bash
./run_linux.sh
# 选择 2 运行游戏（自动检查资源）
```

### 清理重装
```bash
./run_linux.sh
# 选择 6 进入资源管理
# 选择 3 移除所有资源
# 选择 1 重新添加基础资源
```

## 错误处理

脚本包含完善的错误处理：
- 检查必要工具（dotnet, unzip）
- 验证资源文件存在性
- 提供清晰的错误信息和解决建议
- 防止在缺少依赖时运行游戏

## 目录结构

安装后的目录结构：
```
Lawn_PCGL/bin/
├── Debug/net8.0/
│   ├── Content/ (资源文件)
│   └── Lawn (可执行文件)
└── Release/net8.0/
    ├── Content/ (资源文件)
    └── Lawn (可执行文件)
```

## 注意事项

1. **资源文件获取**：需要从原项目渠道获取资源包
2. **空间占用**：完整资源约150-200MB
3. **版本兼容**：确保使用对应版本的资源包
4. **权限要求**：脚本需要在项目目录下执行